<include>
  <context name="store1">
    <!-- Internal extension dialing -->
    <extension name="local_extension">
      <condition field="destination_number" expression="^(10[01][0-9])$">
        <action application="bridge" data="user/$1@store1.local"/>
      </condition>
    </extension>

    <!-- Park slots 700, 701, 702 (toggle: park or retrieve) -->
   <extension name="park_slot">
      <condition field="destination_number" expression="^(?:park\+)?(70[0-2])$">
        <action application="set" data="fifo_music=file:///opt/homebrew/Cellar/freeswitch/1.10.12/share/freeswitch/sounds/music/custom_hold.mp4"/>
        <action application="set" data="park_music=file:///opt/homebrew/Cellar/freeswitch/1.10.12/share/freeswitch/sounds/music/custom_hold.mp4"/>
        <action application="set" data="hold_music=file:///opt/homebrew/Cellar/freeswitch/1.10.12/share/freeswitch/sounds/music/custom_hold.mp4"/>
        <action application="export" data="park_music=file:///opt/homebrew/Cellar/freeswitch/1.10.12/share/freeswitch/sounds/music/custom_hold.mp4"/>
        <action application="export" data="hold_music=file:///opt/homebrew/Cellar/freeswitch/1.10.12/share/freeswitch/sounds/music/custom_hold.mp4"/>
        <action application="export" data="fifo_music=file:///opt/homebrew/Cellar/freeswitch/1.10.12/share/freeswitch/sounds/music/custom_hold.mp4"/>
        <action application="valet_park" data="store1 $1"/>
      </condition>
    </extension>

    <!-- Outbound calls via Store 1's Telnyx trunk -->
    <extension name="outbound">
      <condition field="destination_number" expression="^(\+?1?\d{10})$">
        <action application="set" data="effective_caller_id_number=+17577828734"/>
        <action application="bridge" data="sofia/gateway/telnyx_store1/+1$1"/>
      </condition>
    </extension>
  </context>
</include>